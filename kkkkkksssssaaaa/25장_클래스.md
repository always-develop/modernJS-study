# 25장. 클래스

# [javascript] ☕ 모던 자바스크립트

---

## 25장. 클래스

### 25.1 클래스는 프로토타입의 문법적 설탕인가?

- 클래스는 함수다
- 클래스와 생성자 함수는 비슷하게 동작하지만 몇 가지 차이가 존재한다
    - 클래스는 new 연산자 없이 호출하면 에러가 발생
    - 클래스는 상속을 명시적으로 지원할 수 있도록 `extends` 와 `super` 키워드를 제공
    - 클래스는 호이스팅이 발생하지 않는 것 처럼 동작함
    - 클래스 내에 선언된 코드는 암묵적으로 strict mode 가 적용
    - 클래스의 constructor, 프로토타입 메서드, 정적 메서드 모두 `[[Enumerable]]` 값이 false 이다
- 클래스가 함수를 기반으로 하긴 하지만, 결국 생성자 함수와는 다른 새 객체 생성 메커니즘 으로 보는 것이 더 합당하다

### 25.2 클래스 정의

- 클래스는 일급객체이다
- 클래스에서 정의할 수 있는 메서드들
    - 생성자 함수
        - 클래스 이름이 아닌, `constructor(arg?)` 로 선언하면 된다
    - 정적 메서드
        - `static` 키워드를 붙이고 메서드를 선언하면 정적 메서드가 된다
    - 프로토타입 메서드
        - 키워드를 붙이지 않을 경우 프로토타입 메서드가 된다

### 25.3 클래스 호이스팅

- 클래스도 소스코드 평가 과정 단계에서 평가되어 함수 객체를 생성한다
    - 이 때 생성되는 함수 객체는 `constructor` 이다
    - 생성자와 프로토타입은 별개로 존재할 수 없기 때문에, 프로토타입도 더불어 생성된다
    - 대신, 클래스는 클래스 정의 이전에 참조할 수 없다
        - `let`, `const` 와 비슷하다

### 25.4 인스턴스 생성

- 클래스는 `new`  없이 호출할 경우 타입 에러가 발생한다
- 변수에 클래스를 넣어도 된다
    - e.g. `const me = class Person {};`

### 25.5 메서드

- 인스턴스 프로퍼티는 반드시 `constructor` 내부에서 선언되어야 했지만, 클래스 몸체에 프로퍼티를 선언할 수 있는 방식이 제안 되어 이미 모던 브라우저에서는 가능하다고 한다
- 클래스도 함수 객체의 고유의 프로퍼티를 모두 갖고 있다
    - arguments, caller, prototype…
- 클래스에서 정의하는 `constructor` 는 단순한 메서드가 아닌 클래스의 일부가 된다
- 클래스의 `constructor` 와 프로토타입의 `constructor` 는 연관이 없다
    - 클리스의 `constructor` 는 생성자 함수와 역할이 비슷하다
    - 프로토타입의 `constructor` 는 자신을 생성한 함수의 정보를 가리킨다
- 자바스크립트는 메서드 오버로드가 안되기 때문에, `constructor` 도 오버로드가 안된다
    - 생성자를 두 개 선언하면 예외가 발생한다
    - 생성자가 두 개가 되려면 `constructor` 내에서 분기 처리되어야 할 것 같다
- `constructor` 는 명시적으로 선언하지 않아도 빈 생성자가 암묵적으로 정의된다
- `constructor` 내에서 return 을 사용할 수 있다
    - 단, return 된 객체를 기준으로 인스턴스가 생성되니 주의해야 한다
    - 생성자 함수와 비슷하다
- 클래스 내에서 정의하는 메서드는 기본적으로 프로토타입 메서드로 정의된다
- 정적 메서드를 만드려면 `static` 키우드를 붙인다
- 역시나 프로토타입 메서드와 정적 메서드가 가리키는 `this` 는 다르다!
    - 프로토타입 메서드는 인스턴스를
    - 정적 메서드는 클래스 그 자체를 가리킨다
- 클래스 내에서 정의한 메서드는 non-constructor 이다

### 25.6 클래스의 인스턴스 생성 과정

1. 인스턴스 생성과 `this` 바인딩
    - `new` 와 함께 클래스를 호출하면 먼저 빈 객체가 생성되는데, 이게 미래의 인스턴스가 된다고 한다
    - 이렇게 생성된 인스턴스가 `this` 에 바인딩 된다
2. 인스턴스 초기화
    - `constructor` 내부 코드가 실행된다
    - 프로퍼티를 추가하거나 초기값을 통해 프로퍼티 값을 초기화한다
3. 인스턴스 반환
    - `this` 가 반환된다